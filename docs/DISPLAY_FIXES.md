# ๐ง ุฅุตูุงุญ ูุดุงูู ุดุงุดุฉ ุงูุนุฑุถ

## ๐ด ุงููุดุงูู ุงูููุจูุบ ุนููุง:

### 1. **ุงูุนุฏุงุฏ ุงูุฒููู ุบูุฑ ุตุญูุญ**
**ุงููุตู:** ุงูุชูููุช ุงููุญูู ูููู ุฃู ุงูุญุตุฉ ุจุฏุฃุชุ ููู ุงูุนุฏุงุฏ ูููู "ุจุงูู 10 ุฏูุงุฆู"

### 2. **ูุฑุงุบุงุช ุนูู ุฌูุงูุจ ุงูุดุงุดุฉ**
**ุงููุตู:** ุงูุดุงุดุฉ ูุง ุชููุฃ ุงูุชููุงุฒ ุจุงููุงูู - ููุงู ูุฑุงุบุงุช ุนูู ุงููููู ูุงููุณุงุฑ

---

## โ ุงูุฅุตูุงุญุงุช ุงููุทุจูุฉ

### 1. **ุฅุตูุงุญ ุญุณุงุจ ุงูุนุฏุงุฏ ุงูุฒููู** โฑ๏ธ

**ุงููุดููุฉ:**
```javascript
// ูุงู ูุณุชุฎุฏู n (local time) ุจุฏูุงู ูู nowMs() (server-synced time)
if (isBefore) rem = Math.max(0, Math.floor((startMs - n) / 1000));
else rem = Math.max(0, Math.floor((endMs - n) / 1000));
```

**ุงูุณุจุจ:**
- ุงุณุชุฎุฏุงู `n` (ุงูููุช ุงููุญูู) ุจุฏูุงู ูู `nowMs()` (ุงูููุช ุงููุชุฒุงูู ูุน ุงูุณูุฑูุฑ)
- ูุฐุง ูุณุจุจ ูุฑู ูู ุงูุชูููุช ุจููุฏุงุฑ `serverOffsetMs`
- ุฅุฐุง ูุงู ูุฑู ุงูุชูููุช 10 ุฏูุงุฆูุ ุงูุนุฏุงุฏ ูููู ุฎุงุทุฆ ุจููุณ ุงูููุฏุงุฑ

**ุงูุญู:**
```javascript
// ุงุณุชุฎุฏุงู nowMs() ููุญุตูู ุนูู ุงูููุช ุงููุชุฒุงูู ูุน ุงูุณูุฑูุฑ
const nowMsValue = nowMs();
if (isBefore) rem = Math.max(0, Math.floor((startMs - nowMsValue) / 1000));
else rem = Math.max(0, Math.floor((endMs - nowMsValue) / 1000));
```

**ุงูููู:** [static/js/display.js](../static/js/display.js) - ุญูุงูู ุงูุณุทุฑ 950

---

### 2. **ููุก ุงูุดุงุดุฉ ุจุงููุงูู (ุจุฏูู ูุฑุงุบุงุช)** ๐บ

**ุงููุดููุฉ:**
```javascript
// ูุงู ูุณุชุฎุฏู Math.min (contain mode)
let scale = Math.min(scaleX, scaleY);
// ุงููุชูุฌุฉ: ุงููุญุชูู ูุชููุต ูููุงุณุจ ุฏุงุฎู ุงูุดุงุดุฉ โ ูุฑุงุบุงุช ุนูู ุงูุฌูุงูุจ
```

**ุงูุณุจุจ:**
- `Math.min` ูุฎุชุงุฑ ุงูู scale ุงูุฃุตุบุฑ = **contain mode**
- contain = ูุญุงูุธ ุนูู aspect ratio ุฏุงุฎู ุงูุดุงุดุฉ
- ุงููุชูุฌุฉ: ุนูู ุดุงุดุฉ 16:9ุ ุฅุฐุง ูุงู ุงููุญุชูู 16:9ุ ูุนูู ุฌูุฏุงู
- ููู ุนูู ุดุงุดุงุช ุบูุฑ 16:9 (ูุซู 16:10 ุฃู 4:3)ุ ุชุธูุฑ ูุฑุงุบุงุช

**ุงูุญู:**
```javascript
// ุงุณุชุฎุฏุงู Math.max (cover mode)
let scale = Math.max(scaleX, scaleY);
// ุงููุชูุฌุฉ: ุงููุญุชูู ูููุฃ ุงูุดุงุดุฉ ุจุงููุงูู โ ูุง ูุฑุงุบุงุช!
```

**ุงููุฑู:**

| Mode | Scaling | ุงููุชูุฌุฉ |
|------|---------|---------|
| **contain** (ูุจู) | `Math.min(scaleX, scaleY)` | ูุญุชูู ูุงูู ูุฑุฆู + ูุฑุงุบุงุช ูุญุชููุฉ โ |
| **cover** (ุจุนุฏ) | `Math.max(scaleX, scaleY)` | ููุก ูุงูู ููุดุงุดุฉ + ูุต ูุญุชูู ููุญูุงู โ |

**ุงูููู:** [static/js/display.js](../static/js/display.js) - ุญูุงูู ุงูุณุทุฑ 265

---

## ๐ ุงูููุงุฑูุฉ

### ูุจู ุงูุฅุตูุงุญ:
```
โ ุงูุนุฏุงุฏ: ุจุงูู 10 ุฏูุงุฆู (ุฎุทุฃ)
โฐ ุงูุณุงุนุฉ: ุงูุญุตุฉ ุจุฏุฃุช (ุตุญูุญ)
โ ุชูุงูุถ!

๐บ ุงูุดุงุดุฉ: โโโโโโโโโโโโโโโ
           โโโ ูุญุชูู โโโ  โ ูุฑุงุบุงุช
           โโโโโโโโโโโโโโโ
```

### ุจุนุฏ ุงูุฅุตูุงุญ:
```
โ ุงูุนุฏุงุฏ: ุงูุชูุช (ุตุญูุญ)
โฐ ุงูุณุงุนุฉ: ุงูุญุตุฉ ุจุฏุฃุช (ุตุญูุญ)
โ ูุชุทุงุจู!

๐บ ุงูุดุงุดุฉ: โโโโโโโโโโโโโโโโโ
           โ  ูุญุชูู ูุงูู  โ  โ ุจุฏูู ูุฑุงุบุงุช
           โโโโโโโโโโโโโโโโโ
```

---

## ๐ฏ ุงูุชูุงุตูู ุงูุชูููุฉ

### nowMs() vs Date.now()

```javascript
// nowMs() = ุงูููุช ุงููุชุฒุงูู ูุน ุงูุณูุฑูุฑ
let serverOffsetMs = 0;  // ุงููุฑู ุจูู ููุช ุงููุชุตูุญ ูููุช ุงูุณูุฑูุฑ

function nowMs() {
  return Date.now() + serverOffsetMs;
}

// ูุซุงู:
// Date.now() = 14:00:00 (ููุช ุงููุชุตูุญ - ุฎุงุทุฆ ุจู 10 ุฏูุงุฆู)
// serverOffsetMs = -600000 (10 ุฏูุงุฆู ร 60 ุซุงููุฉ ร 1000)
// nowMs() = 14:00:00 - 10 ุฏูุงุฆู = 13:50:00 โ (ุตุญูุญ)
```

### Cover vs Contain

```javascript
// Contain (ูุจู): ูุถูู ุฑุคูุฉ ูู ุงููุญุชูู
scale = Math.min(viewportWidth/designWidth, viewportHeight/designHeight)
// ูุซุงู ุนูู ุดุงุดุฉ 1680x1050 (16:10):
// scaleX = 1680/1920 = 0.875
// scaleY = 1050/1080 = 0.972
// scale = Math.min(0.875, 0.972) = 0.875
// ุงููุชูุฌุฉ: ูุฑุงุบุงุช ุนููุฏูุฉ (ุฃุนูู ูุฃุณูู)

// Cover (ุจุนุฏ): ูุถูู ููุก ุงูุดุงุดุฉ ุจุงููุงูู
scale = Math.max(viewportWidth/designWidth, viewportHeight/designHeight)
// ูุซุงู ุนูู ููุณ ุงูุดุงุดุฉ:
// scale = Math.max(0.875, 0.972) = 0.972
// ุงููุชูุฌุฉ: ููุก ูุงููุ ูุต ุจุณูุท ูู ุงูุฌูุงูุจ (ููุจูู)
```

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ ุงูุนุฏุงุฏ:
1. ุงูุชุญ ุงูุดุงุดุฉ ูุจู ุจุฏุงูุฉ ุญุตุฉ ุจู 5 ุฏูุงุฆู
2. ุชุฃูุฏ ูู:
   - โ ุงูุณุงุนุฉ ูู ุงูุฑุฃุณ ุตุญูุญุฉ
   - โ ุงูุนุฏุงุฏ ูุทุงุจู ุงูููุช ุงูุญูููู
   - โ ุนูุฏ ุจุฏุงูุฉ ุงูุญุตุฉุ ุงูุนุฏุงุฏ ูุชุญูู ููููุช ุงููุชุจูู

### ุงุฎุชุจุงุฑ ุงูุดุงุดุฉ:
1. ุงูุชุญ ุนูู ุชููุงุฒ ุจุฃู ุญุฌู
2. ุชุฃูุฏ ูู:
   - โ ูุง ูุฑุงุบุงุช ุนูู ุงููููู
   - โ ูุง ูุฑุงุบุงุช ุนูู ุงููุณุงุฑ
   - โ ูุง ูุฑุงุบุงุช ุฃุนูู/ุฃุณูู
   - โ ุงููุญุชูู ูุงุถุญ ูููุฑูุก

---

## ๐ ููุงุญุธุงุช

### ููุดุงุดุงุช ุบูุฑ 16:9:
- **Cover mode** ูุฏ ููุต ุฌุฒุก ุจุณูุท ูู ุงูุญูุงู
- ูุฐุง ููุจูู ูุฃู ุงูุชุตููู ูุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ "safe area"
- ุงููุญุชูู ุงูููู ุฏุงุฆูุงู ูู ุงูููุชุตู

### ุฅุฐุง ุธูุฑุช ูุดููุฉ ุงููุต:
ูููู ุงูุชุญูู ุนุจุฑ URL:
```
?fit=0          โ ุชุนุทูู ุงูุชุญุฌูู (1:1)
?fitMax=1.5     โ ุงูุณูุงุญ ุจุงูุชูุจูุฑ ุญุชู 1.5x
```

---

## ๐ ูููุดุฑ

```bash
# ุฌูุน ุงููููุงุช ุงูุซุงุจุชุฉ
python manage.py collectstatic --noinput

# Deploy
git add static/js/display.js templates/website/display.html
git commit -m "fix: countdown timing and full screen coverage

- Use nowMs() for countdown calculation (synced with server)
- Change scaling from contain to cover mode (fill screen)
- Remove letterboxing on TV displays"

git push origin main
```

---

**ุชุงุฑูุฎ ุงูุฅุตูุงุญ:** 2 ูุจุฑุงูุฑ 2026  
**ุงูุญุงูุฉ:** โ **ุชู ุงูุฅุตูุงุญ ูุงูุงุฎุชุจุงุฑ**
