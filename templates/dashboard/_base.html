<!doctype html>
<html lang="ar" dir="rtl" class="h-full">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>{% block title %}Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…{% endblock %}</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  {% load static %}

  <style>
    [x-cloak] { display: none !important; }
    html, body {
      height: 100%;
      font-family: 'Cairo', sans-serif;
    }

    @keyframes toast-in {
      from { transform: translateY(-10px) scale(0.98); opacity: 0; }
      to { transform: translateY(0) scale(1); opacity: 1; }
    }
    @keyframes toast-out {
      from { transform: translateY(0) scale(1); opacity: 1; }
      to { transform: translateY(-10px) scale(0.98); opacity: 0; }
    }
    .toast-in { animation: toast-in 220ms ease-out both; }
    .toast-out { animation: toast-out 180ms ease-in both; }

    .nav-item {
      transition: all .3s ease;
      position: relative;
      overflow: hidden;
    }
    .nav-item::before {
      content:"";
      position:absolute;
      top:0;
      right:-100%;
      width:100%;
      height:100%;
      background:linear-gradient(90deg, transparent, rgba(255,255,255,.2), transparent);
      transition:right .5s;
    }
    .nav-item:hover::before {
      right:100%;
    }
    .active-nav {
      background: linear-gradient(135deg,#4f46e5,#7c3aed);
      color:white;
      box-shadow:0 4px 15px rgba(79,70,229,.3);
    }
  </style>
</head>

<body class="min-h-full bg-gradient-to-br from-slate-50 to-slate-100 text-slate-900" x-data="{ mobileMenuOpen: false }">

<!-- â–‘â–‘ Header â–‘â–‘ -->
<header class="bg-white/80 backdrop-blur-md shadow-lg sticky top-0 z-40 border-b border-slate-200/60">
  <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">

    <div class="flex items-center space-x-reverse space-x-3">
      <!-- Mobile Menu Toggle -->
      <button @click="mobileMenuOpen = !mobileMenuOpen" class="md:hidden p-2 rounded-lg bg-slate-100 text-slate-600">
        <i class="fas fa-bars" x-show="!mobileMenuOpen"></i>
        <i class="fas fa-times" x-show="mobileMenuOpen" x-cloak></i>
      </button>

      {% if request.user.is_authenticated and request.user.profile.school and request.user.profile.school.logo %}
        <img src="{{ request.user.profile.school.logo.url }}"
             class="h-10 w-10 rounded-xl border bg-white object-contain">
      {% else %}
        <div class="h-10 w-10 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600
                    flex justify-center items-center text-white font-bold text-lg">ğŸ«</div>
      {% endif %}

      <div>
        <h1 class="text-2xl font-extrabold bg-gradient-to-r from-slate-800 to-slate-600 bg-clip-text text-transparent">
          Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
        </h1>
        <p class="text-xs text-slate-500 mt-1">
          {{ school_name|default:"Ù…Ø¯Ø±Ø³ØªÙ†Ø§" }}
        </p>
      </div>
    </div>

    <div class="flex items-center space-x-reverse space-x-4">

      {# ÙƒØ±Øª "Ø§Ø´ØªØ±Ø§ÙƒÙŠ" Ø§Ù„ØµØºÙŠØ± ÙÙŠ Ø§Ù„Ù‡ÙŠØ¯Ø± #}
      {% with sub=request.school_subscription %}
        {% if sub %}
          <div class="hidden md:flex flex-col items-end bg-slate-50 border border-slate-200 rounded-2xl px-4 py-2 text-[11px] leading-snug shadow-sm">
            <div class="flex items-center mb-1">
              <span class="ml-1 text-xs">ğŸ“¦</span>
              <span class="font-semibold text-slate-800">Ø§Ø´ØªØ±Ø§ÙƒÙŠ</span>
            </div>
            <div class="text-slate-700">
              {% if sub.plan %}
                <span class="font-semibold">{{ sub.plan.name }}</span>
              {% endif %}
            </div>
            <div class="text-slate-500">
              Ù…Ù† {{ sub.starts_at|date:"Y-m-d" }}
              {% if sub.ends_at %}
                Ø­ØªÙ‰ {{ sub.ends_at|date:"Y-m-d" }}
              {% else %}
                â€“ Ù…ÙØªÙˆØ­ Ø§Ù„Ù…Ø¯Ø©
              {% endif %}
            </div>
            <div class="mt-1">
              {% if sub.is_active %}
                <span class="inline-flex items-center px-2 py-0.5 rounded-full bg-emerald-50 text-emerald-700 text-[10px] font-semibold">
                  Ù†Ø´Ø·
                </span>
              {% else %}
                <span class="inline-flex items-center px-2 py-0.5 rounded-full bg-rose-50 text-rose-700 text-[10px] font-semibold">
                  ØºÙŠØ± ÙØ¹Ø§Ù„
                </span>
              {% endif %}
            </div>
          </div>
        {% endif %}
      {% endwith %}

        <div class="bg-slate-100 px-3 py-1.5 rounded-full text-sm">
          <span class="hidden sm:inline">Ù…Ø±Ø­Ø¨Ù‹Ø§ØŒ</span>
          <span class="font-semibold">
            {% if request.user.is_authenticated %}
              {{ request.user.get_short_name|default:request.user.username }}
            {% else %}
              Ø¶ÙŠÙ
            {% endif %}
          </span>
        </div>
        {% if request.user.is_authenticated and request.user.profile.schools.all|length > 1 %}
        <div class="relative group">
          <button class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-white border border-slate-200 text-slate-700 hover:bg-slate-50 shadow-sm text-xs font-semibold focus:outline-none">
            <span class="max-w-[80px] truncate">
              {% if request.user.profile.active_school %}
                {{ request.user.profile.active_school.name }}
              {% else %}
                Ø§Ø®ØªØ± Ù…Ø¯Ø±Ø³Ø©
              {% endif %}
            </span>
            <svg class="w-4 h-4 text-slate-500 group-hover:text-slate-700 transition-transform duration-200 transform group-hover:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
          </button>
          <div class="absolute left-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-1 z-50 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 transform scale-95 group-hover:scale-100">
            {% for school in request.user.profile.schools.all %}
              <a href="{% url 'dashboard:switch_school' school.id %}"
                 class="block px-4 py-2 text-sm text-slate-700 hover:bg-slate-100 {% if school == request.user.profile.active_school %}font-semibold bg-slate-50{% endif %}">
                {{ school.name }}
                {% if school == request.user.profile.active_school %}<span class="ml-2 text-emerald-600">(Ù†Ø´Ø·Ø©)</span>{% endif %}
              </a>
            {% endfor %}
          </div>
        </div>
        {% endif %}
      </div>

      {% if request.user.is_authenticated %}
        <a href="{% url 'dashboard:logout' %}"
           class="text-sm bg-gradient-to-r from-red-500 to-rose-600 text-white px-3 py-1.5 md:px-4 rounded-full
                  hover:shadow-lg hover:scale-105 transition-all duration-300 flex items-center gap-1">
          <i class="fas fa-sign-out-alt"></i>
          <span class="hidden md:inline">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</span>
        </a>
      {% endif %}
    </div>
  </div>
</header>

{# â–‘â–‘ Banner ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ â–‘â–‘ #}
{% if request.user.is_authenticated %}
  {% with sub=request.school_subscription %}
    {% if sub and sub.is_active and sub.days_left and sub.days_left <= 10 %}
      <div class="bg-gradient-to-r from-amber-500 to-rose-500 text-white">
        <div class="max-w-7xl mx-auto px-4 py-3 flex flex-col md:flex-row items-center justify-between gap-3">
          <div class="flex items-center gap-2">
            <span class="text-xl">â°</span>
            <div>
              <div class="text-sm md:text-base font-semibold">
                Ù…ØªØ¨Ù‚Ù‘ÙŠ {{ sub.days_left }} ÙŠÙˆÙ…{% if sub.days_left != 1 %}Ø§Ù‹{% endif %} Ø¹Ù„Ù‰ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ø´ØªØ±Ø§ÙƒÙƒ.
              </div>
              <div class="text-xs md:text-sm text-amber-50/90">
                Ù„Ø¶Ù…Ø§Ù† Ø§Ø³ØªÙ…Ø±Ø§Ø± Ø¹Ù…Ù„ Ù„ÙˆØ­Ø© Ø§Ù„Ø¹Ø±Ø¶ Ø¨Ø¯ÙˆÙ† Ø§Ù†Ù‚Ø·Ø§Ø¹ØŒ ÙŠÙÙØ¶Ù‘Ù„ ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ù…Ø¨ÙƒØ±Ù‹Ø§.
              </div>
            </div>
          </div>
          <div class="flex items-center gap-2">
            <a href="https://wa.me/966537720207?text=%D8%AA%D8%AC%D8%AF%D9%8A%D8%AF%20%D8%A7%D8%B4%D8%AA%D8%B1%D8%A7%D9%83%20%D9%84%D9%88%D8%AD%D8%A9%20%D8%A7%D9%84%D8%B9%D8%B1%D8%B6"
               target="_blank"
               class="inline-flex items-center px-3 py-1.5 rounded-full bg-white/10 border border-white/30 text-xs md:text-sm font-semibold hover:bg-white/20 transition">
              <span class="ml-1">ğŸ’¬</span>
              ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„ØªØ¬Ø¯ÙŠØ¯
            </a>
            <a href="mailto:xmansx1122@gmail.com?subject=%D8%AA%D8%AC%D8%AF%D9%8A%D8%AF%20%D8%A7%D8%B4%D8%AA%D8%B1%D8%A7%D9%83&body=%D8%A3%D8%B1%D8%BA%D8%A8%20%D9%81%D9%8A%20%D8%AA%D8%AC%D8%AF%D9%8A%D8%AF%20%D8%A7%D8%B4%D8%AA%D8%B1%D8%A7%D9%83%20%D9%85%D8%AF%D8%B1%D8%B3%D8%AA%D9%86%D8%A7"
               class="inline-flex items-center px-3 py-1.5 rounded-full bg-white text-rose-600 text-xs md:text-sm font-semibold hover:bg-amber-50 transition">
              <span class="ml-1">ğŸ“§</span>
              Ù…Ø±Ø§Ø³Ù„Ø© Ø¨Ø§Ù„Ø¨Ø±ÙŠØ¯
            </a>
          </div>
        </div>
      </div>
    {% endif %}
  {% endwith %}
{% endif %}

{# â–‘â–‘ Toast Messages (Ø§Ø­ØªØ±Ø§ÙÙŠ/ØªØ¨ÙˆÙŠØ¨ Ø¹Ø§Ø¦Ù…) â–‘â–‘ #}
{% if messages %}
  <div id="toastStack"
       class="fixed top-20 right-4 z-50 space-y-3 w-[min(420px,calc(100vw-2rem))] pointer-events-none">
    {% for m in messages %}
      <div class="toast-in pointer-events-auto rounded-2xl border shadow-lg backdrop-blur-md bg-white/80 overflow-hidden"
           data-toast
           data-tags="{{ m.tags }}">
        <div class="flex items-start gap-3 p-4 border-r-4
          {% if m.tags == 'success' %} border-emerald-500
          {% elif m.tags == 'error' %} border-rose-500
          {% elif m.tags == 'warning' %} border-amber-500
          {% else %} border-sky-500
          {% endif %}">

          <div class="mt-0.5">
            {% if m.tags == 'success' %}
              <span class="inline-flex h-8 w-8 items-center justify-center rounded-xl bg-emerald-50 text-emerald-700">âœ…</span>
            {% elif m.tags == 'error' %}
              <span class="inline-flex h-8 w-8 items-center justify-center rounded-xl bg-rose-50 text-rose-700">âŒ</span>
            {% elif m.tags == 'warning' %}
              <span class="inline-flex h-8 w-8 items-center justify-center rounded-xl bg-amber-50 text-amber-700">âš ï¸</span>
            {% else %}
              <span class="inline-flex h-8 w-8 items-center justify-center rounded-xl bg-sky-50 text-sky-700">â„¹ï¸</span>
            {% endif %}
          </div>

          <div class="flex-1">
            <div class="text-[13px] font-semibold text-slate-900">
              {% if m.tags == 'success' %}ØªÙ… Ø¨Ù†Ø¬Ø§Ø­
              {% elif m.tags == 'error' %}Ø­Ø¯Ø« Ø®Ø·Ø£
              {% elif m.tags == 'warning' %}ØªÙ†Ø¨ÙŠÙ‡
              {% else %}Ù…Ø¹Ù„ÙˆÙ…Ø©
              {% endif %}
            </div>
            <div class="mt-1 text-sm text-slate-700 whitespace-pre-line leading-relaxed">
              {{ m }}
            </div>
          </div>

          <button type="button"
                  class="ml-1 -mt-1 p-2 rounded-xl text-slate-500 hover:text-slate-800 hover:bg-slate-100 transition"
                  aria-label="Ø¥ØºÙ„Ø§Ù‚"
                  data-toast-close>
            <i class="fas fa-times"></i>
          </button>
        </div>
      </div>
    {% endfor %}
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const stack = document.getElementById('toastStack');
      if (!stack) return;

      function dismissToast(el) {
        if (!el || el.__dismissing) return;
        el.__dismissing = true;
        el.classList.remove('toast-in');
        el.classList.add('toast-out');
        window.setTimeout(() => el.remove(), 220);
      }

      stack.addEventListener('click', (e) => {
        const btn = e.target.closest('[data-toast-close]');
        if (!btn) return;
        const toast = btn.closest('[data-toast]');
        dismissToast(toast);
      });

      stack.querySelectorAll('[data-toast]').forEach((toast) => {
        const tags = (toast.getAttribute('data-tags') || '').toLowerCase();
        // Ø§Ù„Ù†Ø¬Ø§Ø­/Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø© ØªØªÙ„Ø§Ø´Ù‰ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹Ø› Ø§Ù„Ø®Ø·Ø£ ÙŠØ¨Ù‚Ù‰ Ø­ØªÙ‰ ÙŠÙØºÙ„Ù‚.
        const shouldAutoDismiss = !(tags.includes('error') || tags.includes('danger'));
        if (shouldAutoDismiss) {
          window.setTimeout(() => dismissToast(toast), 6500);
        }
      });
    });
  </script>
{% endif %}

<div class="max-w-7xl mx-auto px-4 py-6 grid grid-cols-12 gap-6">

  <!-- â–‘â–‘ Nav Sidebar â–‘â–‘ -->
  <aside class="col-span-12 md:col-span-3 transition-all duration-300 ease-in-out" 
         :class="mobileMenuOpen ? 'block opacity-100 translate-y-0' : 'hidden md:block opacity-100 translate-y-0'">
    <nav class="bg-white/60 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-white/50 space-y-2">

      <!-- Mobile Close Button -->
      <div class="md:hidden flex justify-end mb-2">
        <button @click="mobileMenuOpen = false" class="p-2 text-slate-500 hover:text-slate-700">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <!-- Home -->
      <a href="{% url 'dashboard:index' %}"
         class="nav-item block px-4 py-3 rounded-xl border transition-all
               {% if request.resolver_match.url_name == 'index' %}active-nav{% else %}bg-white/80{% endif %}">
        <div class="flex items-center">
          <span class="ml-2 text-lg">ğŸ“Š</span>
          <span class="font-medium">Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
        </div>
      </a>

      <!-- Subscription -->
      <a href="{% url 'dashboard:my_subscription' %}"
         class="nav-item block px-4 py-3 rounded-xl border transition-all
               {% if request.resolver_match.url_name == 'my_subscription' %}active-nav{% else %}bg-white/80{% endif %}">
        <div class="flex items-center">
          <span class="ml-2 text-lg">ğŸ’³</span>
          <span class="font-medium">Ø§Ø´ØªØ±Ø§ÙƒÙŠ</span>
        </div>
      </a>

      <!-- Settings -->
      <a href="{% url 'dashboard:settings' %}"
         class="nav-item block px-4 py-3 rounded-xl border transition-all
               {% if request.resolver_match.url_name == 'settings' %}active-nav{% else %}bg-white/80{% endif %}">
        <div class="flex items-center">
          <span class="ml-2 text-lg">âš™ï¸</span>
          <span class="font-medium">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø¯Ø±Ø³Ø©</span>
        </div>
      </a>

      <!-- Screens -->
      <a href="{% url 'dashboard:screen_list' %}"
         class="nav-item block px-4 py-3 rounded-xl border transition-all
               {% if request.resolver_match.url_name == 'screen_list' %}active-nav{% else %}bg-white/80{% endif %}">
        <div class="flex items-center">
          <span class="ml-2 text-lg">ğŸ–¥ï¸</span>
          <span class="font-medium">Ø´Ø§Ø´Ø§Øª Ø§Ù„Ø¹Ø±Ø¶</span>
        </div>
      </a>

      <!-- Days -->
      <a href="{% url 'dashboard:days_list' %}"
         class="nav-item block px-4 py-3 rounded-xl border transition-all
               {% if request.resolver_match.url_name == 'days_list' %}active-nav{% else %}bg-white/80{% endif %}">
        <div class="flex items-center">
          <span class="ml-2 text-lg">ğŸ“…</span>
          <span class="font-medium"> Ø¥Ø¯Ø§Ø±Ø© ØªÙˆÙ‚ÙŠØª Ø§Ù„Ø­Ø­Øµ Ùˆ Ø§Ù„Ø£ÙŠØ§Ù…</span>
        </div>
      </a>

      <!-- Timetable -->
      <a href="{% url 'dashboard:timetable_day' %}"
         class="nav-item block px-4 py-3 rounded-xl border transition-all
               {% if request.resolver_match.url_name == 'timetable_day' %}active-nav{% else %}bg-white/80{% endif %}">
        <div class="flex items-center">
          <span class="ml-2 text-lg">ğŸ—“ï¸</span>
          <span class="font-medium">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙŠÙˆÙ…ÙŠ</span>
        </div>
      </a>

      <!-- Announcements -->
      <a href="{% url 'dashboard:ann_list' %}"
         class="nav-item block px-4 py-3 rounded-xl border transition-all
               {% if request.resolver_match.url_name == 'ann_list' %}active-nav{% else %}bg-white/80{% endif %}">
        <div class="flex items-center">
          <span class="ml-2 text-lg">ğŸ””</span>
          <span class="font-medium">Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</span>
        </div>
      </a>

      <!-- Excellence -->
      <a href="{% url 'dashboard:exc_list' %}"
         class="nav-item block px-4 py-3 rounded-xl border transition-all
               {% if request.resolver_match.url_name == 'exc_list' %}active-nav{% else %}bg-white/80{% endif %}">
        <div class="flex items-center">
          <span class="ml-2 text-lg">â­</span>
          <span class="font-medium">Ù‚Ø³Ù… Ø§Ù„ØªÙ…ÙŠÙ‘Ø²</span>
        </div>
      </a>

      <!-- Standby -->
      <a href="{% url 'dashboard:standby_list' %}"
         class="nav-item block px-4 py-3 rounded-xl border transition-all
               {% if request.resolver_match.url_name == 'standby_list' %}active-nav{% else %}bg-white/80{% endif %}">
        <div class="flex items-center">
          <span class="ml-2 text-lg">â³</span>
          <span class="font-medium">Ø­ØµØµ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</span>
        </div>
      </a>

      <!-- School Data -->
      <a href="{% url 'dashboard:school_data' %}"
         class="nav-item block px-4 py-3 rounded-xl border transition-all
               {% if request.resolver_match.url_name == 'school_data' %}active-nav{% else %}bg-white/80{% endif %}">
        <div class="flex items-center">
          <span class="ml-2 text-lg">ğŸ«</span>
          <span class="font-medium">Ø§Ø¯Ø§Ø±Ø© Ø§Ù„ÙØµÙˆÙ„ ÙˆØ§Ù„Ù…ÙˆØ§Ø¯ Ùˆ Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ†</span>
        </div>
      </a>

      <!-- Support -->
      <a href="{% url 'dashboard:customer_support_tickets' %}"
         class="nav-item block px-4 py-3 rounded-xl border transition-all
               {% if request.resolver_match.url_name == 'customer_support_tickets' %}active-nav{% else %}bg-white/80{% endif %}">
        <div class="flex items-center">
          <span class="ml-2 text-lg">ğŸ›Ÿ</span>
          <span class="font-medium">Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ</span>
        </div>
      </a>

      <!-- SaaS System Staff (Superuser / Support) -->
      {% if is_system_staff %}
        <div class="border-t border-slate-200 my-3"></div>
        <div class="px-2 pb-1 text-[11px] font-semibold text-slate-500">
          Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ø¸Ø§Ù… (SaaS)
        </div>

        <a href="{% url 'dashboard:system_admin_dashboard' %}"
           class="nav-item block px-4 py-3 rounded-xl border transition-all
               {% if request.resolver_match.url_name == 'system_admin_dashboard' %}active-nav{% else %}bg-white/80{% endif %}">
          <div class="flex items-center">
            <span class="ml-2 text-lg">ğŸ§©</span>
            <span class="font-medium">Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ø¸Ø§Ù…</span>
          </div>
        </a>

        {% if not is_support_staff %}
          <a href="{% url 'dashboard:system_schools_list' %}"
             class="nav-item block px-4 py-3 rounded-xl border transition-all
                 {% if request.resolver_match.url_name == 'system_schools_list' %}active-nav{% else %}bg-white/80{% endif %}">
            <div class="flex items-center">
              <span class="ml-2 text-lg">ğŸ«</span>
              <span class="font-medium">Ø§Ù„Ù…Ø¯Ø§Ø±Ø³</span>
            </div>
          </a>
        {% endif %}

        <a href="{% url 'dashboard:system_users_list' %}"
           class="nav-item block px-4 py-3 rounded-xl border transition-all
               {% if request.resolver_match.url_name == 'system_users_list' %}active-nav{% else %}bg-white/80{% endif %}">
          <div class="flex items-center">
            <span class="ml-2 text-lg">ğŸ‘¤</span>
            <span class="font-medium">Ù…Ø³ØªØ®Ø¯Ù…Ùˆ Ø§Ù„Ù†Ø¸Ø§Ù…</span>
          </div>
        </a>

        <a href="{% url 'dashboard:system_employees_list' %}"
           class="nav-item block px-4 py-3 rounded-xl border transition-all
               {% if request.resolver_match.url_name == 'system_employees_list' %}active-nav{% else %}bg-white/80{% endif %}">
          <div class="flex items-center">
            <span class="ml-2 text-lg">ğŸ§‘â€ğŸ’¼</span>
            <span class="font-medium">Ø§Ù„Ù…ÙˆØ¸ÙÙˆÙ†</span>
          </div>
        </a>

        <a href="{% url 'dashboard:system_subscriptions_list' %}"
           class="nav-item block px-4 py-3 rounded-xl border transition-all
               {% if request.resolver_match.url_name == 'system_subscriptions_list' %}active-nav{% else %}bg-white/80{% endif %}">
          <div class="flex items-center">
            <span class="ml-2 text-lg">ğŸ’³</span>
            <span class="font-medium">Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ù„Ù…Ø¯Ø§Ø±Ø³</span>
          </div>
        </a>

        <a href="{% url 'dashboard:system_subscription_requests_list' %}"
           class="nav-item block px-4 py-3 rounded-xl border transition-all
               {% if 'system_subscription_request' in request.resolver_match.url_name %}active-nav{% else %}bg-white/80{% endif %}">
          <div class="flex items-center justify-between">
            <div class="flex items-center">
              <span class="ml-2 text-lg">ğŸ§¾</span>
              <span class="font-medium">Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªØ¬Ø¯ÙŠØ¯/Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</span>
            </div>
            {% if admin_open_subscription_requests_count %}
              <span class="inline-flex items-center justify-center min-w-6 h-6 px-2 rounded-full bg-amber-600 text-white text-[11px] font-bold">
                {{ admin_open_subscription_requests_count }}
              </span>
            {% endif %}
          </div>
        </a>

        <a href="{% url 'dashboard:system_screen_addons_list' %}"
           class="nav-item block px-4 py-3 rounded-xl border transition-all
               {% if 'system_screen_addon' in request.resolver_match.url_name %}active-nav{% else %}bg-white/80{% endif %}">
          <div class="flex items-center">
            <span class="ml-2 text-lg">ğŸ–¥ï¸</span>
            <span class="font-medium">Ø²ÙŠØ§Ø¯Ø§Øª Ø§Ù„Ø´Ø§Ø´Ø§Øª</span>
          </div>
        </a>
      {% endif %}
    </nav>

    <div class="mt-6 text-center">
      <div class="text-xs text-slate-500 bg-white/60 backdrop-blur-sm rounded-xl py-3 px-4 shadow border border-white/50">
        <div class="font-medium text-slate-700 mb-1">Â© {{ school_name|default:"Ù…Ø¯Ø±Ø³ØªÙ†Ø§" }}</div>
        <div class="text-slate-500">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠ</div>
      </div>
    </div>
  </aside>


  <!-- â–‘â–‘ Main Content â–‘â–‘ -->
  <main class="col-span-12 md:col-span-9">

    <div class="bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border overflow-hidden">

      <div class="border-b border-slate-200/60 bg-gradient-to-r from-slate-50 to-white px-6 py-4">
        <h2 class="text-xl font-bold text-slate-800">
          {% block page_title %}Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©{% endblock %}
        </h2>
        <p class="text-slate-600 text-sm mt-1">
          {% block page_description %}Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆØ§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ø®ØªÙ„ÙØ©{% endblock %}
        </p>
      </div>

      <div class="p-6">
        {% block content %}
        <p class="text-slate-600 text-center">Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ….</p>
        {% endblock %}
      </div>

    </div>
  </main>
</div>

</body>
</html>
