{% load static %}
<!doctype html>
<html lang="ar" dir="rtl" class="h-full">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="color-scheme" content="dark">
  <title>{% if school_name %}{{ school_name }} โ {% endif %}ููุญุฉ ุงูุนุฑุถ ุงูุฐููุฉ</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@200;300;400;500;600;700;800&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="{% static 'css/tailwind.generated.css' %}?v=2026-01-14">
  <link rel="stylesheet" href="{% static 'css/app.css' %}?v=2026-modern-ui">

  <style>
    /* 2026 Base Styles - Dynamic Theme Integration */
    /* We piggyback on app.css variables which change based on [data-theme] */
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    html, body {
      width: 100%;
      height: 100%;
      overflow: hidden;
      position: fixed;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: "IBM Plex Sans Arabic", system-ui, sans-serif;
      background-color: var(--bg-deep, #020617);
      color: #f8fafc;
      /* โ FIX: ุญุฌู ุฎุท ุฃุณุงุณู ุฃูุจุฑ ูุชุญุณูู ุงููุฑุงุกุฉ ุนูู ุงูุชููุงุฒ */
      font-size: 18px; /* ุฒูุงุฏุฉ ูู 16px ุงูุงูุชุฑุงุถู */
      line-height: 1.5;
    }

        /* Enhanced viewport sizing for TV displays */
        body.display-board {
            width: 100vw;
            height: 100vh;
            min-height: 100vh;
            max-height: 100vh;
        }

        /* Optimized auto-fit wrapper for TV screens */
        #fitRoot {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            display: block;
            background: var(--bg-deep, #020617);
        }

        /* Design canvas optimized for full screen display - Airport Style */
        #fitStage {
            width: 1920px;
            height: 1080px;
            /* โ FIX: ููุก ูุงูู ูู ุงูุญุงูุฉ ููุญุงูุฉ (ูุซู ุดุงุดุงุช ุงููุทุงุฑุงุช) */
            /* ุงูุจุฏุงูุฉ ูู ุงูุฒุงููุฉ ุงูุนููุง ุงููุณุฑู ุจุฏูุงู ูู ุงูุชูุณูุท */
            position: absolute;
            top: 0;
            left: 0;
            transform-origin: top left;
            will-change: transform;
            display: flex;
            flex-direction: column;
            /* Anti-aliasing for crisp text on TV */
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
        }
        
        /* Force full screen coverage - no letterboxing */
        @media screen {
            #fitRoot {
                background: var(--bg-deep, #020617);
            }
        }
        
        /* Ensure crisp scaling on all displays */
        #fitStage * {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

    /* Mesh Gradient Background - Simplified */
    .bg-mesh {
      position: fixed;
      inset: 0;
      z-index: -1;
      /* Solid modern dark background (Luxury Matte) */
      background-color: #0f172a; 
      background-image: none;
      filter: none;
      opacity: 1;
      transform: translateZ(0);
    }

    /* Custom Scrollbar Hide */
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

    /* Glass Effect Utility - Clean Luxury Design */
    .glass-panel {
      /* Flat dark background with slight transparency for glass feel */
      background: rgba(15, 23, 42, 0.6);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      /* Thin crisp border */
      border: 1px solid rgba(255, 255, 255, 0.1);
      /* Soft large shadow for depth */
      box-shadow: 0 4px 24px rgba(0, 0, 0, 0.2);
      transform: translateZ(0);
      position: relative;
    }
    
    /* Removed extra glow/gradient borders */
    .glass-panel::before {
      display: none;
    }

        /* Old TVs / low-end mode */
        body[data-lite="1"] .bg-mesh {
            background: #0f172a;
            filter: none;
        }
        body[data-lite="1"] .glass-panel {
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
            box-shadow: none;
            background: #1e293b;
            border-color: rgba(255, 255, 255, 0.05);
        }
        body[data-lite="1"] .glass-panel::before,
        body[data-lite="1"] .glass-panel.rounded-3xl::after,
        body[data-lite="1"] main .glass-panel.rounded-3xl.flex-1::before,
        body[data-lite="1"] main .glass-panel.rounded-3xl.flex-1 > .relative.z-10::after {
            display: none;
        }
        body[data-lite="1"] .slot-item {
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
        }
        body[data-lite="1"] .animate-pulse-slow { animation: none; }
        body[data-lite="1"] #heroTitle { 
            animation: none;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));
            background: linear-gradient(135deg, #ffffff, #e0e7ff) !important;
        }
        body[data-lite="1"] #clock { text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5); }
        body[data-lite="1"] .progress-track,
        body[data-lite="1"] .progress-bar {
            filter: none;
        }
        body[data-lite="1"] #countdown {
            filter: none;
            background: white !important;
            -webkit-text-fill-color: white !important;
        }
        body[data-lite="1"] #badgeKind {
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            text-shadow: none;
        }
        body[data-lite="1"] main .glass-panel.rounded-3xl.flex-1 > div:first-child {
            animation: none;
            opacity: 0.3;
        }
        body[data-lite="1"] #exCard::before {
            display: none;
        }
        body[data-lite="1"] .honor-wrap img {
            animation: none;
            transition: none;
        }
        body[data-lite="1"] .honor-wrap img:hover {
            transform: none;
        }
        
        /* โ ุงุญุชุฑุงู ุชูุถููุงุช ุงููุณุชุฎุฏู ูุชูููู ุงูุญุฑูุฉ */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
            .bg-mesh { filter: none; opacity: 0.3; }
            .animate-pulse-slow { animation: none; }
            #heroTitle { animation: none; }
            .w-2.h-2.rounded-full { animation: none; }
            .slot-item { transition: none; }
            main .glass-panel.rounded-3xl.flex-1 > div:first-child { animation: none; }
            #exCard::before { display: none; }
            .honor-wrap img { 
                animation: none !important; 
                transition: none !important; 
            }
        }

        /* โ ุชุนุทูู hover effects ุนูู ุงูุฃุฌูุฒุฉ ุงูููุณูุฉ */
        @media (hover: none) {
            .slot-item:hover {
                background: rgba(255, 255, 255, 0.03);
                border-color: rgba(255, 255, 255, 0.05);
                transform: none;
                box-shadow: none;
            }
            .honor-wrap img:hover {
                transform: none;
                box-shadow: 
                    0 8px 32px rgba(0, 0, 0, 0.4),
                    0 0 0 3px rgba(245, 158, 11, 0.2),
                    inset 0 0 20px rgba(251, 191, 36, 0.1);
                border-color: rgba(251, 191, 36, 0.3);
            }
        }

        @supports not ((backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px))) {
            .glass-panel { 
                backdrop-filter: none; 
                -webkit-backdrop-filter: none;
                background: rgba(15, 23, 42, 0.85);
            }
            .glass-panel::before {
                display: none;
            }
            .slot-item { 
                backdrop-filter: none; 
                -webkit-backdrop-filter: none; 
            }
        }

    /* Progress Circle - Clean Luxury */
    .progress-track { 
      stroke: rgba(255, 255, 255, 0.1); 
      stroke-width: 6; 
      fill: none;
      vector-effect: non-scaling-stroke;
    }
    .progress-bar { 
      stroke: var(--accent-main, #60a5fa); 
      stroke-width: 6; 
      stroke-linecap: round; 
      fill: none; 
      transition: stroke-dashoffset 1s linear; 
      transform: rotate(-90deg); 
      transform-origin: 50% 50%;
      will-change: stroke-dashoffset;
      vector-effect: non-scaling-stroke;
      /* Soft glow instead of heavy shadow */
      filter: drop-shadow(0 0 4px rgba(96, 165, 250, 0.4));
    }

    /* Animations - ููุญุณูู ููุฃุฏุงุก */
    @keyframes pulse-slow {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }
    .animate-pulse-slow { 
      animation: pulse-slow 3s infinite;
      /* โ ุชุญุณูู animation performance */
      will-change: opacity;
    }

    .track { 
      will-change: transform;
      /* โ ุฅูุดุงุก compositing layer ูููุตู */
      transform: translateZ(0);
    }
    
    .hidden { display: none !important; }
    
    /* โ ุชุญุณูู Scrollbar ููุชูุฑูุฑ ุงูุณูุณ */
    .standby-viewport,
    .list-viewport {
      /* ุชุญุณูู smooth scrolling ุนูู ุงูุดุงุดุงุช ุงููุฏููุฉ */
      -webkit-overflow-scrolling: touch;
      /* ุชุญุณูู performance ููุนูุงุตุฑ ุงููุชุญุฑูุฉ */
      contain: layout style paint;
    }

        /* Responsive typography safeguards for TVs / small viewports */
        #clock {
            font-size: clamp(2.5rem, 5vw, 3.75rem); /* ุฒูุงุฏุฉ ูู 2.2rem */
            line-height: 1;
            font-weight: 700;
        }
        #heroTitle {
            font-size: clamp(2.5rem, 5vw, 4rem); /* ุฒูุงุฏุฉ ูู 2.1rem */
            line-height: 1.1;
            overflow-wrap: anywhere;
            word-break: break-word;
            font-weight: 800;
        }
        
        /* โ FIX: ุฒูุงุฏุฉ ุญุฌู ุงููุตูุต ุงูุฃุณุงุณูุฉ ูููุถูุญ */
        .glass-panel {
            font-size: 1.1rem; /* 110% ูู ุงูุญุฌู ุงูุฃุณุงุณู */
        }
        
        /* โ ุชูุจูุฑ ุนูุงููู ุงูุจุทุงูุงุช - responsive ูุฌููุน ุฃุญุฌุงู ุงูุดุงุดุงุช */
        h2, h3 {
            font-size: clamp(1.5rem, 2.5vw, 2rem); /* ุฒูุงุฏุฉ ูู 1.4rem ุซุงุจุช */
            font-weight: 700;
            line-height: 1.2;
            letter-spacing: 0.02em; /* ูุณุงูุงุช ุตุบูุฑุฉ ุจูู ุงูุญุฑูู */
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3); /* ุธู ุฎููู ูููุถูุญ */
        }
        
        /* โ ุชูุจูุฑ ุงูุนุฏุงุฏ (ุนุฏุฏ ุงูุญุตุต) */
        #pcCount, #sbCount {
            font-size: clamp(1rem, 1.8vw, 1.4rem);
            padding: 0.4rem 0.8rem;
        }

        /* โ Slot item styling (applies to actual items created by display.js) */
        /* ุชูุจูุฑ ูุจูุฑ ูููุตูุต ุฏุงุฎู ุจุทุงูุงุช ุงูุญุตุต - ูููุถูุญ ุนูู ุงูุดุงุดุงุช ุงููุจูุฑุฉ */
        .slot-item {
            padding: 1rem 1.25rem; /* ุฒูุงุฏุฉ ูู 0.75rem 1rem */
            font-size: clamp(1.4rem, 2.4vw, 2rem); /* ุชูุจูุฑ ุฅุถุงูู: 1.3โ1.4rem, 1.85โ2rem */
            line-height: 1.6; /* ุชุจุงุนุฏ ุฃูุจุฑ ุจูู ุงูุณุทูุฑ ูููุถูุญ */
            background: rgba(255, 255, 255, 0.03);
            border-radius: 0.75rem;
            border: 1px solid rgba(255, 255, 255, 0.05);
            /* โ ุชูููู blur ูู 5px ุฅูู 3px ูุชุญุณูู ุฃุฏุงุก ุงูุชูุฑูุฑ */
            backdrop-filter: blur(3px);
            /* โ ุชุญุณูู rendering ุนูู ุงูุดุงุดุงุช ุงููุฏููุฉ */
            transform: translateZ(0);
            contain: layout style paint;
            /* ุชุญุณูู ุชุจุงูู ุงูุฃููุงู */
            color: rgba(255, 255, 255, 0.95);
        }
        .slot-item:nth-child(even) {
            background: rgba(255, 255, 255, 0.06);
            border-color: rgba(255, 255, 255, 0.08);
        }
        
        /* โ ุชูุจูุฑ ุฃุณูุงุก ุงููุนูููู ูุงูุตููู ุฏุงุฎู ุงููุฑูุช */
        .slot-item .teacher-name,
        .slot-item .class-name {
            font-weight: 600;
            font-size: 1.05em; /* ูุณุจู ูู ุญุฌู .slot-item */
        }

        /* โ ุชูุณูู ูุฑุช ููุญุฉ ุงูุดุฑู - ุชุญุฌูู ุงูุตูุฑ ุจุดูู ุงุญุชุฑุงูู */
        .honor-wrap {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
            padding: 1rem;
        }

        .honor-wrap img {
            width: 240px !important;
            height: 240px !important;
            min-width: 240px;
            border-radius: 12px; /* Slightly rounded corners, more modern */
            object-fit: cover;
            object-position: center;
            /* Uniform border and soft shadow */
            border: 2px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            background: #1e293b;
            transition: transform 0.3s ease;
        }

        /* โจ ุชุฃุซูุฑ hover ุนูู ุตูุฑุฉ ููุญุฉ ุงูุดุฑู */
        .honor-wrap img:hover {
            transform: scale(1.02);
            border-color: rgba(255, 255, 255, 0.2);
        }

        /* Removed complex keyframes for simpler performance */

        .honor-meta {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            max-width: 100%;
        }

        .honor-name {
            font-size: clamp(1.8rem, 2.5vw, 2.2rem);
            font-weight: 700;
            color: #ffffff;
            line-height: 1.3;
        }

        .honor-reason {
            font-size: clamp(1.2rem, 1.8vw, 1.5rem);
            font-weight: 500;
            color: #94a3b8; /* Slate-400 */
            line-height: 1.5;
            padding: 0.75rem 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        /* ========================================
           โจ LUXURY ENHANCEMENTS - Clean Flat 2026
           ======================================== */

        /* ๐จ Header Card */
        header .glass-panel {
            background: rgba(15, 23, 42, 0.6); /* Uniform glass */
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }

        /* ๐ซ School Logo */
        #schoolLogo {
            transition: transform 0.3s ease;
        }

        /* โฐ Clock Styling - Clean White */
        #clock {
            color: #ffffff;
            font-weight: 700;
            letter-spacing: 0.05em;
            /* Removed heavy gradients */
            background: none;
            -webkit-text-fill-color: #ffffff;
        }

        /* ๐จ Alert Card - Deep Red Frame */
        #alertContainer {
            background: rgba(69, 10, 10, 0.5); /* Deep red glass */
            border: 1px solid rgba(248, 113, 113, 0.2);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        #alertContainer::before {
            display: none;
        }

        /* ========================================
           ๐ฏ HERO CARD 2026 - Clean Pro Design
           ======================================== */
        
        main .glass-panel.rounded-3xl.flex-1 {
            /* Deep, solid, professional dark slate */
            background: #1e293b; 
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        /* โจ Subtle background noise/texture instead of gradients */
        main .glass-panel.rounded-3xl.flex-1 > div:first-child {
            display: none; /* Remove animated mesh */
        }

        /* ๐จ Hero Title - Solid High Contrast */
        #heroTitle {
            font-size: clamp(2.5rem, 5vw, 4rem) !important;
            color: #ffffff !important;
            background: none !important;
            -webkit-text-fill-color: #ffffff !important;
            animation: none !important;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
            letter-spacing: -0.01em;
            line-height: 1.1 !important;
            font-weight: 800 !important;
        }

        /* ๐ Badge Styling - Solid Accent Pill */
        #badgeKind {
            background: rgba(99, 102, 241, 0.2);
            border: 1px solid rgba(99, 102, 241, 0.4);
            color: #e0e7ff !important;
            box-shadow: none;
            text-shadow: none;
            font-weight: 700 !important;
            padding: 0.5rem 1.25rem !important;
            font-size: 0.85rem !important;
            border-radius: 99px;
        }

        /* โฑ๏ธ Progress Circle Container */
        .relative.w-24.h-24 {
            filter: none;
        }

        /* ๐ต Circle Progress - Solid Color */
        #circleProgress {
            stroke: #60a5fa !important; /* Blue-400 */
            filter: drop-shadow(0 0 4px rgba(96, 165, 250, 0.4));
            stroke-width: 6 !important;
        }

        /* โฒ๏ธ Countdown Timer - Clean White Mono */
        #countdown {
            font-size: clamp(1.5rem, 2vw, 2rem) !important;
            color: #ffffff !important;
            background: none !important;
            -webkit-text-fill-color: #ffffff !important;
            filter: none;
            font-weight: 700 !important;
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
        }

        /* ๐ Hero Range Time */
        #heroRange {
            font-size: clamp(1rem, 1.3vw, 1.2rem) !important;
            color: #94a3b8 !important; /* Slate-400 */
            font-weight: 500 !important;
            text-shadow: none;
        }

        /* ๐ซ Current Schedule List */
        #currentScheduleList {
            font-size: clamp(1.1rem, 1.5vw, 1.3rem) !important;
            color: #f1f5f9 !important; /* Slate-100 */
            text-shadow: none;
            line-height: 1.6 !important;
        }

        /* ๐ฏ Activity Label Enhancement */
        main .glass-panel.rounded-3xl.flex-1 .text-xs.font-bold.uppercase {
            font-weight: 700;
            letter-spacing: 0.1em;
            color: #94a3b8;
        }

        /* ๐ Active Dot - Simple Glow */
        main .glass-panel.rounded-3xl.flex-1 .w-2.h-2.rounded-full.bg-emerald-500 {
            box-shadow: 0 0 8px rgba(16, 185, 129, 0.6);
        }

        /* ๐จ Hero Card Inner Content Responsive Padding */
        main .glass-panel.rounded-3xl.flex-1 > .relative.z-10 {
            padding: clamp(1.5rem, 3vw, 2.5rem) !important;
            gap: clamp(1rem, 2vw, 1.5rem) !important;
        }

        /* ๐ Count Badges - Flat Pills */
        #pcCount, #sbCount {
            font-size: clamp(1rem, 1.8vw, 1.4rem);
            padding: 0.4rem 1rem;
            font-weight: 700;
            border-radius: 8px;
            box-shadow: none;
        }

        /* โ Period Classes Card - Solid Emerald Tint */
        #pcCount {
            background: rgba(16, 185, 129, 0.15);
            border: 1px solid rgba(16, 185, 129, 0.3);
            color: #34d399; /* Emerald-400 */
            text-shadow: none;
        }

        /* ๐ Standby Classes Card - Solid Orange Tint */
        #sbCount {
            background: rgba(249, 115, 22, 0.15);
            border: 1px solid rgba(249, 115, 22, 0.3);
            color: #fb923c; /* Orange-400 */
            text-shadow: none;
        }

        /* ๐ Side Cards Headers - Clean Dark */
        aside .glass-panel > div:first-child {
            background: rgba(255, 255, 255, 0.03);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            backdrop-filter: none;
            box-shadow: none;
        }

        /* ๐ข Active Pulse - Simple Fade */
        .w-2.h-2.rounded-full.bg-emerald-500,
        .w-2.h-2.rounded-full.bg-orange-500 {
            animation: pulse-simple 2s infinite;
        }

        @keyframes pulse-simple {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* ๐ Excellence Card - Clean Gold Accent */
        #exCard {
            /* Flat dark background, no gradients */
            background: #1e293b; 
            border: 1px solid rgba(245, 158, 11, 0.3); /* Amber border */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        /* Override side panel gradient in Ex Card */
        #exCard > div:first-child {
            background: rgba(245, 158, 11, 0.1) !important; /* Flat amber tint */
            border-right: 1px solid rgba(255, 255, 255, 0.05);
        }

        /* Override inner gold circle gradient */
        #exCard > div:first-child > div:first-child {
            background: rgba(245, 158, 11, 0.2) !important;
            border: 1px solid rgba(245, 158, 11, 0.5);
            color: #fbbf24;
            box-shadow: none !important;
        }

        /* โ Remove all shimmer/glows from ExCard */
        #exCard::before,
        #exCard .absolute {
            display: none !important;
        }
        /* Restore the wrapper for content (it might be absolute, so be careful not to hide content) */
        #exSlot {
            display: flex !important;
            position: relative !important;
        }
        #exSlot::before, #exSlot > .absolute {
            display: none !important; /* Hide background effects only */
        }


        /* ๐ก๏ธ Duty Card - Clean Indigo Accent */
        #dutyCard {
            /* Flat dark background */
            background: #1e293b;
            border: 1px solid rgba(99, 102, 241, 0.3); /* Indigo border */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        /* Override side panel gradient in Duty Card */
        #dutyCard > div.relative.w-80 {
            background: rgba(99, 102, 241, 0.1) !important; /* Flat indigo tint */
            border-right: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        /* Override inner icon gradient */
        #dutyCard .w-16.h-16 {
            background: none !important;
            box-shadow: none !important;
            border: 1px solid rgba(99, 102, 241, 0.5);
            border-radius: 1rem;
            padding: 4px;
        }
        #dutyCard .w-16.h-16 > div {
            background: rgba(99, 102, 241, 0.2) !important;
        }

        /* โ Remove all decorative meshes and glows from Duty Card */
        #dutyCard > div.absolute, /* The background mesh */
        #dutyCard .blur-\[60px\], /* The glow blob */
        #dutyCard .bg-gradient-to-t, /* Bottom gradient fade */
        #dutyCard .bg-gradient-to-r { /* General gradients */
            display: none !important;
        }
        
        /* Ensure content remains visible */
        #dutySlot {
            z-index: 20;
            position: relative;
        }

        /* ๐จ Slot Items - Clean & Flat */
        .slot-item {
            transition: background-color 0.2s, transform 0.2s;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: none;
        }

        .slot-item:hover {
            background: rgba(255, 255, 255, 0.08); /* Brighter on hover */
            border-color: rgba(255, 255, 255, 0.1);
            transform: translateX(-4px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        /* Removed decorative gradients */
        .glass-panel.rounded-3xl::after,
        main .glass-panel.rounded-3xl.flex-1::after,
        main .glass-panel.rounded-3xl.flex-1::before,
        main .glass-panel.rounded-3xl.flex-1 > .relative.z-10::after {
            display: none;
        }

        /* โจ School Name - Clean White */
        #schoolName {
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            color: #ffffff;
        }

        /* ๐ Date Styling */
        #dateGregorian, #dateHijri {
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }
  </style>
</head>

<body
  class="display-board h-screen w-screen flex flex-col"
  data-theme="{% if theme %}{{ theme }}{% else %}indigo{% endif %}"
    data-accent-color="{% if display_accent_color %}{{ display_accent_color }}{% endif %}"
    data-preview-lock="{% if preview_lock %}1{% else %}0{% endif %}"
  data-token="{% if api_token %}{{ api_token }}{% endif %}"
  data-api-token="{% if api_token %}{{ api_token }}{% endif %}"
  data-snapshot-url="{% if snapshot_url %}{{ snapshot_url }}{% endif %}"
  data-school-id="{% if school_id %}{{ school_id }}{% endif %}"
  data-school-type="{% if school_type %}{{ school_type }}{% endif %}"
  data-media-prefix="{% if MEDIA_URL %}{{ MEDIA_URL }}{% else %}/media/{% endif %}"
  data-refresh="{% if refresh_interval_sec %}{{ refresh_interval_sec }}{% else %}10{% endif %}"
  data-standby="{% if standby_scroll_speed %}{{ standby_scroll_speed }}{% else %}0.8{% endif %}"
  data-periods-speed="{% if periods_scroll_speed %}{{ periods_scroll_speed }}{% else %}0.5{% endif %}"
    style="{% if display_accent_color %}--accent-main: {{ display_accent_color }};{% endif %}"
>
  <div class="bg-mesh"></div>

  <!-- Blocking overlay -->
    <div id="blocker" class="u-hidden fixed inset-0 z-[9999] flex items-center justify-center bg-slate-950/90 backdrop-blur-xl p-6" role="alert" aria-live="assertive">
    <div class="glass-panel w-full max-w-2xl rounded-3xl p-10 text-center border-red-500/30">
        <div class="mx-auto w-20 h-20 rounded-full bg-red-500/10 flex items-center justify-center mb-6">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-10 h-10 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
            </svg>
        </div>
        <h2 id="blockerTitle" class="text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-red-400 to-rose-400 mb-4">ูุฐู ุงูุดุงุดุฉ ูุฑุชุจุทุฉ ุจุฌูุงุฒ ุขุฎุฑ</h2>
        <p id="blockerDetails" class="text-xl text-slate-300 mb-6">ูุง ูููู ุงุณุชุฎุฏุงู ููุณ ุงูุฑุงุจุท ุนูู ุฃูุซุฑ ูู ุชููุงุฒ ูู ููุช ูุงุญุฏ.</p>
        
        <div class="bg-slate-900/50 rounded-xl p-4 border border-white/5 inline-block w-full max-w-lg mb-6">
            <div class="text-sm text-slate-500 mb-1">ุงูุฑุงุจุท ุงูุญุงูู</div>
            <div class="font-mono text-lg text-red-300 dir-ltr truncate px-2" id="blockerLink">โ</div>
        </div>

        <div class="text-slate-400 text-base">
            ููููู ุฅูู ุชููุงุฒ ุฌุฏูุฏ: <span class="text-white font-medium">ุงูุตู ุงูุฌูุงุฒ ูู ููุญุฉ ุงูุชุญูู</span> &larr; ุดุงุดุงุช ุงูุนุฑุถ.
        </div>
    </div>
  </div>

        <!-- Auto-fit root: viewport container (NOT transformed) -->
        <div id="fitRoot" class="h-full w-full">

    <!-- Auto-fit stage: transformed/scaled to fit the viewport -->
    <div id="fitStage" class="">

  <!-- Header -->
  <header class="flex-none p-5 pb-0">
    <div class="glass-panel rounded-2xl p-4 flex justify-between items-center relative overflow-hidden">
        <!-- Glow effect -->
        <div class="absolute top-0 right-0 w-64 h-full bg-gradient-to-l from-white/5 to-transparent pointer-events-none"></div>

        <div class="flex items-center gap-6 relative z-10">
            <!-- Logo -->
            <div class="w-16 h-16 rounded-xl bg-white/10 flex items-center justify-center overflow-hidden border border-white/10 shadow-lg">
                <img id="schoolLogo" data-fallback-src="{% static 'img/UntiTtled-1.png' %}" src="{% if logo_url %}{{ logo_url }}{% else %}{% static 'img/UntiTtled-1.png' %}{% endif %}" class="w-full h-full object-contain p-1" alt="Logo">
            </div>

            <div class="flex flex-col">
                <h1 id="schoolName" class="text-2xl md:text-3xl font-black tracking-tight text-white mb-1 drop-shadow-sm">
                    {% if school_name %}{{ school_name }}{% else %}ููุญุฉ ุงูุนุฑุถ ุงูุฐููุฉ{% endif %}
                </h1>
                <div class="flex items-center gap-3 text-slate-300 text-sm font-medium">
                    <span id="dateGregorian" class="opacity-90"></span>
                    <span class="w-1 h-1 rounded-full bg-slate-500"></span>
                    <span id="dateHijri" class="opacity-90"></span>
                </div>
            </div>
        </div>

        <div class="text-right pl-4">
            <div class="text-[10px] font-bold uppercase tracking-widest mb-0.5" style="color: var(--accent-sub, #93c5fd);">ุงูุชูููุช ุงููุญูู</div>
            <div id="clock" class="text-5xl font-mono font-bold text-white tracking-widest leading-none drop-shadow-lg" style="font-variant-numeric: tabular-nums;">--:--</div>
        </div>
    </div>
  </header>

  <!-- Main Content Grid -->
  <main class="flex-1 min-h-0 p-5 grid grid-cols-12 gap-5">
    
    <!-- Main Column (Right) -->
    <section class="col-span-12 lg:col-span-8 flex flex-col gap-5 min-h-0">
        
        <!-- Alert Card -->
        <div class="glass-panel rounded-2xl p-0 flex flex-col overflow-hidden u-hidden" id="alertContainer"> <!-- JS toggles hidden class -->
             <!-- Recreating structure for JS targetting: alertTitle, alertDetails -->
             <div class="border-b border-white/5 bg-red-500/10 p-3 px-5 flex items-center gap-3">
                <span class="animate-pulse w-2 h-2 rounded-full bg-red-500"></span>
                <div id="alertTitle" class="font-bold text-red-200 text-lg">ุฌุงุฑู ุงูุชุญููู...</div>
             </div>
             <div class="p-4 px-6">
                <div id="alertDetails" class="text-xl leading-relaxed text-white">...</div>
             </div>
        </div>
        <!-- Alert Container Placeholder (The JS expects specific structure, I will keep the ids but styling is handled by JS inserting text usually) 
             Wait, existing HTML had alertTitle inside alertContainer. 
             If JS toggles #alertContainer visibility, I should make sure it starts visible if needed or respects 'hidden' class. 
             The JS code: toggleHidden($('alertContainer'), false/true);
             So I should put the ID on the wrapper div.
        -->
        
        <!-- Hero Card -->
        <div class="glass-panel rounded-3xl flex-1 flex flex-col relative overflow-hidden group">
            <!-- Animated Background Mesh -->
            <div class="absolute inset-0 bg-gradient-to-br from-indigo-500/10 via-transparent to-purple-500/10 opacity-50"></div>
            
            <!-- SVG Gradients Definition -->
            <svg width="0" height="0" style="position: absolute;">
                <defs>
                    <linearGradient id="heroProgressGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:rgb(99, 102, 241);stop-opacity:1" />
                        <stop offset="50%" style="stop-color:rgb(139, 92, 246);stop-opacity:1" />
                        <stop offset="100%" style="stop-color:rgb(168, 85, 247);stop-opacity:1" />
                    </linearGradient>
                </defs>
            </svg>
            
            <div class="relative z-10 flex-1 p-8 flex flex-col gap-6">
                <!-- Top Row: Badge & Progress -->
                <div class="flex flex-wrap justify-between items-start gap-6">
                    <div class="space-y-4 flex-1">
                        <div class="flex items-center gap-4 flex-wrap">
                            <span id="badgeKind" class="px-4 py-2 rounded-full bg-white/10 border border-white/10 text-xs font-bold uppercase tracking-wider backdrop-blur-md" style="color: var(--accent-sub, #a5b4fc);">--</span>
                            <span id="heroRange" class="text-slate-400 num-font text-sm tracking-wide">--:--</span>
                        </div>
                        
                        <h2 id="heroTitle" class="text-5xl md:text-6xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white via-[var(--accent-sub,#e0e7ff)] to-[var(--accent-main,#818cf8)] leading-tight py-1">
                            ุฌุงุฑู ุงูุชุญููู...
                        </h2>
                    </div>

                    <!-- Luxury Progress Circle -->
                    <div class="relative flex-none" style="width: clamp(96px, 10vw, 140px); height: clamp(96px, 10vw, 140px);">
                        <svg class="w-full h-full" viewBox="0 0 120 120">
                            <!-- Background Glow -->
                            <circle cx="60" cy="60" r="54" class="stroke-slate-800/50" stroke-width="12" fill="none" opacity="0.3"></circle>
                            <!-- Background Track -->
                            <circle cx="60" cy="60" r="54" class="progress-track"></circle>
                            <!-- Active Progress with Gradient -->
                            <circle id="circleProgress" cx="60" cy="60" r="54" class="progress-bar" stroke-dasharray="339.292" stroke-dashoffset="339.292"></circle>
                        </svg>
                        <div class="absolute inset-0 flex flex-col items-center justify-center">
                            <span id="countdown" class="text-3xl font-mono font-bold text-white tabular-nums">--:--</span>
                            <span class="text-[10px] text-slate-400 uppercase tracking-widest font-bold mt-1" style="color: var(--accent-sub, #93c5fd);">ุงููุชุจูู</span>
                        </div>
                        <!-- Decorative Ring -->
                        <div class="absolute inset-0 rounded-full border border-white/10" style="padding: -8px;"></div>
                    </div>
                </div>

                <!-- Current Activity List -->
                <div class="mt-auto">
                    <div class="text-xs font-bold uppercase tracking-widest mb-3 flex items-center gap-2" style="color: var(--accent-sub, #93c5fd);">
                        <div class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse shadow-[0_0_8px_rgba(16,185,129,0.6)]"></div>
                        ุงููุดุงุท ุงูุญุงูู
                    </div>
                    <div id="currentScheduleList" class="flex flex-wrap gap-2 text-xl text-slate-200">
                        <span class="opacity-50">...</span>
                    </div>
                </div>
            </div>

            <!-- Bottom: Timeline / Mini Schedule -->
            <div class="border-t border-white/5 bg-black/20 p-5 backdrop-blur-md opacity-0 pointer-events-none select-none" aria-hidden="true">
                 <div class="flex items-center justify-between mb-4">
                     <span class="text-sm font-bold text-slate-400">ูุณุงุฑ ุงูููู</span>
                     <div class="flex items-center gap-2 px-3 py-1.5 rounded-lg bg-white/5 border border-white/5">
                        <span class="text-[10px] text-slate-500 uppercase">ุงูุชุงูู</span>
                        <span id="nextLabel" class="text-xs font-bold text-white truncate max-w-[150px]">--</span>
                     </div>
                 </div>

                 <!-- Horizontal Scroll/List Container -->
                 <div id="miniSchedule" class="flex gap-4 overflow-x-auto no-scrollbar mask-gradient-x py-2">
                     <span class="text-sm text-slate-500 italic px-4">ุฌุงุฑู ุฌูุจ ุงูุฌุฏูู...</span>
                 </div>
            </div>

            <!-- Infinite Progress Line at very bottom -->
            <div class="h-1 bg-slate-800 w-full absolute bottom-0 left-0">
                <div id="progressBar" class="h-full w-0 transition-all duration-1000" style="background: linear-gradient(90deg, var(--accent-sub), var(--accent-main));"></div>
            </div>
        </div>

        <!-- Featured Panel Slot (Excellence / Duty) -->
        <!-- Excellence Board (Honor) -->
        <div id="exCard" class="glass-panel rounded-2xl p-1 flex overflow-hidden min-h-[220px] max-h-[300px]">
             <!-- Side Info -->
             <div class="w-64 bg-gradient-to-b from-slate-900/50 to-slate-900/80 p-6 flex flex-col justify-center border-l border-white/5">
                <div class="w-12 h-12 rounded-2xl bg-gradient-to-br from-yellow-400 to-amber-600 flex items-center justify-center text-2xl shadow-lg shadow-amber-900/20 mb-4">
                    ๐
                </div>
                <div class="text-2xl font-bold text-white mb-1">ููุญุฉ ุงูุดุฑู</div>
                <div class="text-sm text-slate-400">ูุญุชูู ุจุงููุชููุฒูู</div>
                
                <div class="mt-auto flex items-center gap-2 bg-black/20 rounded-lg p-2 w-fit">
                    <span id="exIndex" class="font-mono text-amber-400 font-bold">0</span>
                    <span class="text-slate-600">/</span>
                    <span id="exTotal" class="font-mono text-slate-400">0</span>
                </div>
             </div>

             <!-- Main Content Slot -->
             <div id="exSlot" class="flex-1 flex items-center justify-center p-6 relative">
                 <div class="absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-amber-500/5 via-transparent to-transparent"></div>
                 <div class="text-slate-500 animate-pulse font-medium">ุฌุงุฑู ุงูุชุญููู...</div>
             </div>
        </div>

        <!-- Duty / Supervision Board (Luxury Redesign) -->
        <div id="dutyCard" class="relative rounded-3xl overflow-hidden min-h-[220px] max-h-[300px] u-hidden flex border border-white/10 shadow-2xl bg-slate-900/60 backdrop-blur-2xl group">
             <!-- Decorative background mesh for the whole card -->
             <div class="absolute inset-0 bg-gradient-to-r from-slate-900 via-slate-900/90 to-slate-800/80 z-0"></div>
             
             <!-- Side Info -->
             <div class="relative w-80 p-8 flex flex-col justify-center z-10 border-l border-white/5 bg-gradient-to-b from-white/5 to-transparent">
                <!-- Dynamic Glow -->
                <div class="absolute -top-20 -right-20 w-40 h-40 bg-purple-500/30 blur-[60px] rounded-full pointer-events-none"></div>
                <div class="absolute bottom-0 left-0 w-full h-1/2 bg-gradient-to-t from-black/40 to-transparent pointer-events-none"></div>

                <div class="flex items-center gap-4 mb-4">
                    <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 p-[1px] shadow-lg shadow-indigo-500/20">
                        <div class="w-full h-full rounded-2xl bg-black/20 backdrop-blur-sm flex items-center justify-center text-3xl">
                            ๐ก๏ธ
                        </div>
                    </div>
                    <div>
                        <div class="text-xs font-bold text-indigo-300 uppercase tracking-widest mb-1">Supervision</div>
                        <h2 class="text-3xl font-black text-white leading-none">ุงูุฅุดุฑุงู</h2>
                    </div>
                </div>
                
                <h2 class="text-3xl font-black text-white/50 leading-none mb-6">ูุงูููุงูุจุฉ</h2>

                <div class="flex items-center gap-3">
                    <div class="px-4 py-2 rounded-lg bg-black/40 border border-white/10 flex items-center gap-2 backdrop-blur-sm">
                        <span class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></span>
                        <span class="text-slate-400 text-sm font-medium">ุนุฏุฏ ุงูุชููููุงุช:</span>
                        <span id="dutyTotal" class="font-mono text-xl text-white font-bold">0</span>
                    </div>
                </div>
             </div>

             <!-- Main Content Slot -->
             <div id="dutySlot" class="flex-1 relative overflow-hidden min-h-0 z-10">
                 <!-- Inner Shadow -->
                 <div class="absolute inset-y-0 left-0 w-8 bg-gradient-to-r from-black/20 to-transparent pointer-events-none z-20"></div>

                 <!-- Viewport -->
                 <div class="absolute inset-0 overflow-hidden list-viewport">
                     <div id="dutyTrack" class="track flex flex-col gap-3 p-6 pr-0">
                         <div class="text-slate-500 animate-pulse font-medium px-4">ุฌุงุฑู ุงูุชุญููู...</div>
                     </div>
                 </div>
             </div>
        </div>

    </section>

    <!-- Side Column (Left) -->
    <aside class="col-span-12 lg:col-span-4 flex flex-col gap-5 min-h-0">
        
        <!-- Period Classes Card -->
        <div class="glass-panel rounded-2xl flex-1 flex flex-col min-h-0 relative overflow-hidden">
            <div class="p-4 border-b border-white/5 bg-white/5 flex justify-between items-center">
                <div class="flex items-center gap-2">
                    <span class="w-2 h-2 rounded-full bg-emerald-500 shadow-[0_0_10px_rgba(16,185,129,0.5)]"></span>
                    <h3 class="font-bold text-white">ุญุตุต ุฌุงุฑูุฉ</h3>
                </div>
                <span id="pcCount" class="bg-emerald-500/20 text-emerald-400 border border-emerald-500/30 px-2 py-0.5 rounded text-sm font-mono font-bold">0</span>
            </div>
            
            <div class="flex-1 relative overflow-hidden min-h-0">
                <!-- Viewport for scroller. JS appends items to #periodClassesTrack -->
                <div class="absolute inset-0 overflow-hidden list-viewport"> 
                    <div id="periodClassesTrack" class="track flex flex-col gap-2 p-3"></div>
                </div>
            </div>
        </div>

        <!-- Standby Classes Card -->
        <div class="glass-panel rounded-2xl flex-1 flex flex-col min-h-0 relative overflow-hidden border-orange-500/20">
            <div class="p-4 border-b border-white/5 bg-orange-500/5 flex justify-between items-center">
                <div class="flex items-center gap-2">
                    <span class="w-2 h-2 rounded-full bg-orange-500 shadow-[0_0_10px_rgba(249,115,22,0.5)]"></span>
                    <h3 class="font-bold text-orange-200">ุญุตุต ุงูุงูุชุธุงุฑ</h3>
                </div>
                <span id="sbCount" class="bg-orange-500/20 text-orange-400 border border-orange-500/30 px-2 py-0.5 rounded text-sm font-mono font-bold">0</span>
            </div>
            
            <div class="flex-1 relative overflow-hidden min-h-0">
                <div class="absolute inset-0 overflow-hidden standby-viewport">
                    <div id="standbyTrack" class="track flex flex-col gap-2 p-3"></div>
                </div>
            </div>
        </div>

    </aside>
  </main>

        </div>

    </div>

  <noscript>
    <div class="fixed inset-0 z-50 flex items-center justify-center bg-black text-white p-10 text-center text-xl">
      ูุฐู ุงูุตูุญุฉ ุชุญุชุงุฌ JavaScript ููุนูู ุนูู ุดุงุดุฉ ุงูุนุฑุถ.
    </div>
  </noscript>

    <script src="{% static 'js/display.js' %}?v=2026-transition-time-sync-v6"></script>
</body>
</html>
