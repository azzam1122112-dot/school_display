{% extends "dashboard/_base.html" %}

{% block title %}ููุญุฉ ุฅุฏุงุฑุฉ ุงููุธุงู{% endblock %}
{% block page_title %}ููุญุฉ ุฅุฏุงุฑุฉ ุงููุธุงู (SaaS){% endblock %}
{% block page_description %}
ุฅุฏุงุฑุฉ ุงููุฏุงุฑุณุ ุงููุณุชุฎุฏูููุ ูุงูุงุดุชุฑุงูุงุช ูู ููุตุฉ ููุญุฉ ุงูุนุฑุถ ุงููุฏุฑุณูุฉ ุจููุท SaaS.
{% endblock %}

{% block content %}
<div class="space-y-8">

  <!-- ูุฑูุช ุงูุฅุญุตุงุฆูุงุช -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
    <!-- ุนุฏุฏ ุงููุฏุงุฑุณ -->
    <div class="relative overflow-hidden rounded-2xl bg-gradient-to-br from-sky-500 to-sky-600 text-white shadow-lg">
      <div class="absolute inset-0 bg-[radial-gradient(circle_at_top,#ffffff33,transparent_60%)] opacity-80"></div>
      <div class="relative p-5 flex items-center justify-between">
        <div>
          <p class="text-sm text-sky-100 mb-1">ุฅุฌูุงูู ุงููุฏุงุฑุณ</p>
          <p class="text-3xl font-extrabold">{{ schools_count|default:0 }}</p>
        </div>
        <div class="h-12 w-12 rounded-2xl bg-white/15 flex items-center justify-center text-2xl shadow-inner">
          ๐ซ
        </div>
      </div>
    </div>

    <!-- ุงููุฏุงุฑุณ ุงููุดุทุฉ -->
    <div class="relative overflow-hidden rounded-2xl bg-gradient-to-br from-emerald-500 to-emerald-600 text-white shadow-lg">
      <div class="absolute inset-0 bg-[radial-gradient(circle_at_top,#ffffff33,transparent_60%)] opacity-80"></div>
      <div class="relative p-5 flex items-center justify-between">
        <div>
          <p class="text-sm text-emerald-100 mb-1">ูุฏุงุฑุณ ุจุงุดุชุฑุงู ูุดุท</p>
          <p class="text-3xl font-extrabold">{{ active_schools_count|default:0 }}</p>
        </div>
        <div class="h-12 w-12 rounded-2xl bg-white/15 flex items-center justify-center text-2xl shadow-inner">
          โ
        </div>
      </div>
    </div>

    <!-- ุงููุณุชุฎุฏููู -->
    <div class="relative overflow-hidden rounded-2xl bg-gradient-to-br from-indigo-500 to-indigo-600 text-white shadow-lg">
      <div class="absolute inset-0 bg-[radial-gradient(circle_at_top,#ffffff33,transparent_60%)] opacity-80"></div>
      <div class="relative p-5 flex items-center justify-between">
        <div>
          <p class="text-sm text-indigo-100 mb-1">ุฅุฌูุงูู ุงููุณุชุฎุฏููู</p>
          <p class="text-3xl font-extrabold">{{ users_count|default:0 }}</p>
        </div>
        <div class="h-12 w-12 rounded-2xl bg-white/15 flex items-center justify-center text-2xl shadow-inner">
          ๐ฅ
        </div>
      </div>
    </div>

    <!-- ุงูุงุดุชุฑุงูุงุช ุงููุดุทุฉ -->
    <div class="relative overflow-hidden rounded-2xl bg-gradient-to-br from-amber-500 to-amber-600 text-white shadow-lg">
      <div class="absolute inset-0 bg-[radial-gradient(circle_at_top,#ffffff33,transparent_60%)] opacity-80"></div>
      <div class="relative p-5 flex items-center justify-between">
        <div>
          <p class="text-sm text-amber-100 mb-1">ุงุดุชุฑุงูุงุช ูุดุทุฉ</p>
          <p class="text-3xl font-extrabold">{{ subs_active_count|default:0 }}</p>
        </div>
        <div class="h-12 w-12 rounded-2xl bg-white/15 flex items-center justify-center text-2xl shadow-inner">
          ๐ณ
        </div>
      </div>
    </div>
  </div>

  <!-- ุขุฎุฑ ุงููุฏุงุฑุณ ูุขุฎุฑ ุงูุงุดุชุฑุงูุงุช -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- ุขุฎุฑ ุงููุฏุงุฑุณ -->
    <div class="bg-white rounded-2xl shadow-lg border border-slate-100 overflow-hidden">
      <div class="px-5 py-4 border-b border-slate-100 flex items-center justify-between">
        <div>
          <h2 class="text-lg font-semibold text-slate-900">ุฃุญุฏุซ ุงููุฏุงุฑุณ ุงููุณุฌููุฉ</h2>
          <p class="text-xs text-slate-500 mt-1">ุขุฎุฑ 5 ูุฏุงุฑุณ ูุถุงูุฉ ูููุธุงู</p>
        </div>
        <a href="{% url 'dashboard:system_schools_list' %}" class="text-xs text-sky-600 hover:text-sky-800 font-semibold">
          ุนุฑุถ ุงููู
        </a>
      </div>
      <div class="divide-y divide-slate-100">
        {% for s in latest_schools %}
        <div class="px-5 py-3 flex items-center justify-between hover:bg-slate-50/80 transition">
          <div>
            <div class="font-semibold text-slate-900">{{ s.name }}</div>
            <div class="text-xs text-slate-500 mt-0.5">
              slug: <span class="font-mono text-slate-600 text-[11px]">{{ s.slug }}</span>
            </div>
          </div>
          <div class="flex items-center gap-3">
            <span class="text-xs px-2.5 py-1 rounded-full font-semibold
              {% if s.is_active %}bg-emerald-100 text-emerald-700{% else %}bg-rose-100 text-rose-700{% endif %}">
              {% if s.is_active %}ูุดุท{% else %}ููููู{% endif %}
            </span>
            <span class="text-[11px] text-slate-400">
              {{ s.created_at|date:"Y-m-d" }}
            </span>
          </div>
        </div>
        {% empty %}
        <div class="px-5 py-6 text-center text-slate-400 text-sm">
          ูุง ุชูุฌุฏ ูุฏุงุฑุณ ููุณุฌููุฉ ุจุนุฏ.
        </div>
        {% endfor %}
      </div>
    </div>

    <!-- ุขุฎุฑ ุงูุงุดุชุฑุงูุงุช -->
    <div class="bg-white rounded-2xl shadow-lg border border-slate-100 overflow-hidden">
      <div class="px-5 py-4 border-b border-slate-100 flex items-center justify-between">
        <div>
          <h2 class="text-lg font-semibold text-slate-900">ุฃุญุฏุซ ุงูุงุดุชุฑุงูุงุช</h2>
          <p class="text-xs text-slate-500 mt-1">ุขุฎุฑ 5 ุงุดุชุฑุงูุงุช ูุฏุงุฑุณ</p>
        </div>
        <a href="{% url 'dashboard:system_subscriptions_list' %}" class="text-xs text-indigo-600 hover:text-indigo-800 font-semibold">
          ุนุฑุถ ุงููู
        </a>
      </div>
      <div class="divide-y divide-slate-100">
        {% for sub in latest_subs %}
        <div class="px-5 py-3 flex items-center justify-between hover:bg-slate-50/80 transition">
          <div>
            <div class="font-semibold text-slate-900">
              {{ sub.school.name }}
            </div>
            <div class="text-xs text-slate-500 mt-0.5">
              ุงูุฎุทุฉ:
              <span class="font-medium text-slate-700">{{ sub.plan.name }}</span>
            </div>
          </div>
          <div class="text-right space-y-1">
            <span class="text-xs px-2.5 py-1 rounded-full font-semibold
              {% if sub.status == "ูุดุท" %}bg-emerald-100 text-emerald-700
              {% elif sub.status == "ููุชูู" %}bg-amber-100 text-amber-700
              {% else %}bg-slate-100 text-slate-600{% endif %}">
              {{ sub.status }}
            </span>
            <div class="text-[11px] text-slate-400">
              {{ sub.start_date|date:"Y-m-d" }}
              {% if sub.end_date %}
                โ {{ sub.end_date|date:"Y-m-d" }}
              {% endif %}
            </div>
          </div>
        </div>
        {% empty %}
        <div class="px-5 py-6 text-center text-slate-400 text-sm">
          ูุง ุชูุฌุฏ ุงุดุชุฑุงูุงุช ูุณุฌููุฉ ุจุนุฏ.
        </div>
        {% endfor %}
      </div>
    </div>
  </div>

</div>
{% endblock %}
